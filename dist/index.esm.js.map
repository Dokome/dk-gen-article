{"version":3,"file":"index.esm.js","sources":["../src/lib/random.js","../src/lib/generator.js","../src/index.js"],"sourcesContent":["// 随机模块\r\nexport const randomInt = (min, max) => {\r\n  const p = Math.random()\r\n  return Math.floor(min * (1 - p) + max * p)\r\n}\r\n\r\nexport const createRandomPick = target => {\r\n  const copy = target.slice()\r\n  const len = copy.length - 1\r\n\r\n  const randomPick = () => {\r\n    const index = randomInt(0, len)\r\n    const picked = copy[index]\r\n    ;[copy[index], copy[len]] = [copy[len], copy[index]]\r\n\r\n    return picked\r\n  }\r\n\r\n  // 除去第一次的影响\r\n  randomPick()\r\n\r\n  return randomPick\r\n}\r\n","import { createRandomPick, randomInt } from './random.js'\r\n\r\nconst sentence = (pick, replacer) => {\r\n  let ret = pick()\r\n\r\n  for (const key in replacer) {\r\n    ret = ret.replace(\r\n      new RegExp(`{{${key}}}`, 'g'),\r\n      typeof replacer[key] === 'function' ? replacer[key]() : replacer[key]\r\n    )\r\n  }\r\n\r\n  return ret\r\n}\r\n\r\n// 文章生成\r\nexport const generate = (title, { corpus, min = 5000, max = 10000 }) => {\r\n  const lenOfArticles = randomInt(min, max)\r\n  const { famous, bosh_before, bosh, said, conclude } = corpus\r\n  const [pickFamous, pickBoshBefore, pickBosh, pickSaid, pickConclude] = [\r\n    famous,\r\n    bosh_before,\r\n    bosh,\r\n    said,\r\n    conclude,\r\n  ].map(item => createRandomPick(item))\r\n\r\n  const article = []\r\n  let lenOfTotal = 0\r\n\r\n  while (lenOfTotal < lenOfArticles) {\r\n    const lenOfSection = randomInt(200, 500)\r\n    let section = ''\r\n\r\n    while (section.length < lenOfSection || !/[。？]$/.test(section)) {\r\n      const n = randomInt(0, 100)\r\n      if (n < 20) {\r\n        section += sentence(pickFamous, {\r\n          said: pickSaid,\r\n          conclude: pickConclude,\r\n          title,\r\n        })\r\n      } else if (n < 50) {\r\n        section +=\r\n          sentence(pickBoshBefore, { title }) + sentence(pickBosh, { title })\r\n      } else {\r\n        section += sentence(pickBosh, { title })\r\n      }\r\n    }\r\n\r\n    lenOfTotal += section.length\r\n    article.push(section)\r\n  }\r\n\r\n  return article\r\n}\r\n","import { readFileSync } from 'fs'\r\nimport { dirname, resolve } from 'path'\r\nimport { fileURLToPath } from 'url'\r\nimport { generate } from './lib/generator.js'\r\nimport { createRandomPick } from './lib/random.js'\r\n\r\n// 获取当前脚本的 url\r\nconst curUrl = import.meta.url\r\nconst data = readFileSync(\r\n  resolve(dirname(fileURLToPath(curUrl)), 'corpus/data.json'),\r\n  { encoding: 'utf-8' }\r\n)\r\nconst corpus = JSON.parse(data)\r\n\r\nconst pickTitle = createRandomPick(corpus.title)\r\nconst title = pickTitle()\r\n\r\nconst article = generate(title, { corpus })\r\nconsole.log(`${title}\\n\\n  ${article.join(`\\n `)}`)\r\n"],"names":["randomInt","min","max","p","Math","random","floor","createRandomPick","target","copy","slice","len","length","randomPick","index","picked","sentence","pick","replacer","ret","key","replace","RegExp","generate","title","corpus","lenOfArticles","famous","bosh_before","bosh","said","conclude","map","item","pickFamous","pickBoshBefore","pickBosh","pickSaid","pickConclude","article","lenOfTotal","lenOfSection","section","test","n","push","curUrl","import","meta","url","data","readFileSync","resolve","dirname","fileURLToPath","encoding","JSON","parse","pickTitle","console","log","join"],"mappings":"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"}